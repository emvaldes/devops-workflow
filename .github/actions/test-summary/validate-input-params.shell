#!/usr/bin/env bash

## File: .github/actions/test-summary/validate-input-params.shell
## Version: 0.0.1

## This function expects the name of an associative array as its first argument.
function validate_input_parameters() {

    local warning_message="Are missing or invalid!";

    ## Create a nameref to the associative array.
    if [[ "${#1}" -gt 0 ]]; then
            local -n input_params="$1";
      else  echo -e "Input Params: ${warning_message}";
            return 1;
    fi;
    if [[ "${#2}" -gt 0 ]]; then
            local workflow_name="${2}";
      else  echo -e "Workflow Name: ${warning_message}";
            return 1;
    fi;

    local invalid_params=false;
    local error_header="Error: ${workflow_name} cannot proceed without a valid";

    ## Iterate over the input_params.
    for label in "${!input_params[@]}"; do
      echo "Input: ${input_params[$label]}";
      if [[ -z "${input_params[$label]}" ]]; then
        echo "${error_header} ${label}.";
        invalid_params=true;
      fi;
    done;

    if [[ "${invalid_params}" == true ]]; then
      echo -e "Invalid Params: ${invalid_params}";
      exit 1;
    fi;
    return 0;
  }; alias validate-parameters='validate_parameters';

validate_input_parameters "${@}";
